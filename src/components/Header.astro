---
/**
 * Header — مینیمال، لوگو وسط، دکمه‌های چیپی
 * - زبان با متن کامل (fa → English / en → فارسی)
 * - سرچ (placeholder برای آینده)
 * - هشتگ: منوی شبکه‌های اجتماعی
 * - ناوبری سمت راست: محصولات / درباره ما / خدمات پس از فروش / نمایندگی‌ها
 */
const { lang = 'fa' } = Astro.props;
const isFa = lang === 'fa';
const t = (fa: string, en: string) => (isFa ? fa : en);
const otherLang = isFa ? 'en' : 'fa';
---

<header class="header fixed top-0 inset-x-0 z-50">
  <div class="relative mx-auto max-w-[1280px] px-4 md:px-6 py-3 flex items-center justify-between">
    <!-- گروه چپ: زبان، سرچ، هشتگ/شبکه‌ها -->
    <div class="flex items-center gap-2 md:gap-3">
      <!-- سوییچر زبان با متن کامل -->
      <a href={`/${otherLang}/`} class="chip" aria-label={isFa ? 'Switch to English' : 'تغییر زبان به فارسی'}>
        {isFa ? 'English' : 'فارسی'}
      </a>

      <!-- سرچ (فعلاً placeholder) -->
      <button class="chip" aria-label={t('جستجو','Search')}
              onclick="window.dispatchEvent(new CustomEvent('mix:openSearch'));"
              title={t('جستجو','Search')}>
        <!-- آیکون ذره‌بین -->
        <svg width="16" height="16" viewBox="0 0 24 24" aria-hidden="true">
          <path fill="currentColor" d="M10 2a8 8 0 105.293 14.293l4.707 4.707 1.414-1.414-4.707-4.707A8 8 0 0010 2zm0 2a6 6 0 110 12A6 6 0 0110 4z"/>
        </svg>
      </button>

      <!-- هشتگ: منوی شبکه‌های اجتماعی -->
      <div class="relative group">
        <button class="chip" aria-haspopup="menu" aria-expanded="false" title={t('شبکه‌های اجتماعی','Social')}>
          <!-- آیکون هشتگ -->
          <svg width="14" height="14" viewBox="0 0 24 24" aria-hidden="true">
            <path fill="currentColor" d="M10 3h2l-.7 4H15l.7-4h2l-.7 4h3v2h-3.4l-.6 4H21v2h-3.4l-.7 4h-2l.7-4H11l-.7 4H8.3l.7-4H6v-2h3.4l.6-4H6V7h3.4l.6-4zM9.7 13h4.3l.6-4h-4.3l-.6 4z"/>
          </svg>
        </button>

        <!-- دراپ‌داون شبکه‌ها -->
        <div class={`pointer-events-none absolute mt-2 ${isFa ? 'right-0' : 'left-0'}`}>
          <div class="pointer-events-auto opacity-0 translate-y-1 group-hover:opacity-100 group-hover:translate-y-0 transition
                      rounded-xl glass p-3 w-[220px] border"
               style="border-color:var(--stroke)" role="menu" aria-label="Social links">
            <ul class="space-y-2 text-sm">
              <li><a class="hover:text-brand flex items-center gap-2" href="https://instagram.com" target="_blank" rel="noreferrer">Instagram</a></li>
              <li><a class="hover:text-brand flex items-center gap-2" href="https://www.aparat.com" target="_blank" rel="noreferrer">Aparat</a></li>
              <li><a class="hover:text-brand flex items-center gap-2" href="https://youtube.com" target="_blank" rel="noreferrer">YouTube</a></li>
              <li><a class="hover:text-brand flex items-center gap-2" href="https://www.linkedin.com" target="_blank" rel="noreferrer">LinkedIn</a></li>
            </ul>
          </div>
        </div>
      </div>
    </div>

    <!-- لوگو وسط -->
    <a href={isFa ? '/fa/' : '/en/'} class="absolute left-1/2 -translate-x-1/2" aria-label="MixPlus — Home">
      <!-- نسخهٔ لایت -->
      <img src="/img/logo.svg" alt="MixPlus" class="w-16 h-16 block dark:hidden" width="64" height="64" loading="eager" decoding="async" />
      <!-- نسخهٔ دارک -->
      <img src="/img/logo-dark.svg" alt="MixPlus" class="w-16 h-16 hidden dark:block" width="64" height="64" loading="eager" decoding="async" />
    </a>

    <!-- گروه راست: ناوبری مینیمال -->
    <nav class="flex items-center gap-2 md:gap-3" aria-label="main">
      <!-- اگر هنوز صفحات داخلی نداری، موقتاً به سکشن‌های همین صفحه لینک بده -->
      <a href={`/${lang}/#products`} class="chip">{t('محصولات','Products')}</a>
      <a href={`/${lang}/#about`} class="chip">{t('درباره ما','About')}</a>
      <a href={`/${lang}/#after-sales`} class="chip">{t('خدمات پس از فروش','After-Sales')}</a>
      <a href={`/${lang}/#dealers`} class="chip">{t('نمایندگی‌ها','Dealers')}</a>
    </nav>
  </div>
</header>
