/* -------------------------------------------------
   Tailwind hooks
--------------------------------------------------*/
@tailwind base;
@tailwind components;
@tailwind utilities;

/* -------------------------------------------------
   Mini Reset (چون Tailwind Preflight خاموش است)
--------------------------------------------------*/
*,
*::before,
*::after { box-sizing: border-box; }
html, body { margin: 0; padding: 0; }
img, video { max-width: 100%; display: block; height: auto; }
ul, ol { list-style: none; margin: 0; padding: 0; }
a { text-decoration: none; color: inherit; }
button { background: none; border: 0; color: inherit; font: inherit; padding: 0; cursor: pointer; }
h1,h2,h3,h4,h5,h6 { margin: 0; font-weight: 700; }

/* -------------------------------------------------
   Theme tokens
--------------------------------------------------*/
:root{
  --bg:#0b0f14;
  --fg:#e8edf2;
  --fg-muted:#b7c1cc;
  --card:rgba(18,24,33,0.72);
  --stroke:rgba(255,255,255,0.10);
  --brand:#0fa99c;
}
.light{
  --bg:#ffffff;
  --fg:#0f1720;
  --fg-muted:#5b6470;
  --card:rgba(255,255,255,0.55);
  --stroke:rgba(15,23,32,0.08);
}

/* -------------------------------------------------
   Fonts (فایل‌های woff2 را در public/fonts بگذار)
--------------------------------------------------*/
@font-face{
  font-family:'Kalameh';
  src:url('/fonts/KALAMEH-REGULAR.woff2') format('woff2');
  font-weight:400; font-style:normal; font-display:swap;
}
@font-face{
  font-family:'Kalameh';
  src:url('/fonts/KALAMEH-BOLD.woff2') format('woff2');
  font-weight:700; font-style:normal; font-display:swap;
}
@font-face{
  font-family:'KalamehFaNum';
  src:url('/fonts/KALAMEHFANUM-REGULAR.woff2') format('woff2');
  font-weight:400; font-style:normal; font-display:swap;
}

/* کلاس‌های صریح فونت */
.font-fa{ font-family:'KalamehFaNum','Kalameh',system-ui,sans-serif; }
.font-en{ font-family:'Montserrat','Inter',system-ui,sans-serif; }

/* -------------------------------------------------
   Base colors
--------------------------------------------------*/
html{ background: var(--bg); color: var(--fg); }
body{ -webkit-font-smoothing: antialiased; -moz-osx-font-smoothing: grayscale; }

/* متن‌های ثانویه */
.muted{ color: var(--fg-muted); }

/* -------------------------------------------------
   Buttons / Chips (ممکن است بعداً کم‌کم حذف شوند)
--------------------------------------------------*/
.btn{
  display:inline-flex; align-items:center; gap:.5rem;
  padding:.5rem 1rem; border-radius:999px; font-size:.875rem;
  border:1px solid var(--stroke);
  background:linear-gradient(135deg, rgba(15,169,156,.20), rgba(15,169,156,.06));
  transition:all .25s ease;
}
.btn:hover{ transform:translateY(-1px); box-shadow:0 10px 30px rgba(15,169,156,.18); }
.btn-primary{ color:#fff; background-image:linear-gradient(135deg,#0fa99c,#13c1b2); border-color:transparent; }
.btn-outline{ background:transparent; color:var(--fg); }

.chip{
  display:inline-flex; align-items:center; gap:.4rem;
  padding:.375rem .75rem; border-radius:999px; font-size:.875rem;
  border:1px solid var(--stroke); background:var(--card);
  transition:color .2s ease, transform .2s ease, box-shadow .2s ease;
}
.chip:hover{ color:var(--brand); transform:translateY(-1px); }

/* -------------------------------------------------
   Glass card
--------------------------------------------------*/
.glass{
  backdrop-filter:saturate(180%) blur(10px);
  -webkit-backdrop-filter:saturate(180%) blur(10px);
  background:var(--card);
}

/* -------------------------------------------------
   Header (شفاف در بالا، سالید بعد از اسکرول)
--------------------------------------------------*/
.header{
  backdrop-filter:saturate(180%) blur(10px);
  -webkit-backdrop-filter:saturate(180%) blur(10px);
  background:rgba(18,24,33,0.20);
  border-bottom:1px solid transparent;
  transition:background .25s ease, border-color .25s ease, opacity .16s ease, transform .16s ease;
}
.light .header{ background:rgba(255,255,255,0.55); }
html.scrolled .header{ background:var(--card); border-bottom:1px solid var(--stroke); }

/* ناوبری مینیمال */
.header .nav { display:flex; align-items:center; gap:.75rem; font-size:.95rem; line-height:1; }
.header .nav a, .header .nav button.navlink { color:var(--fg); opacity:.95; padding:.25rem .1rem; }
.header .nav a:hover, .header .nav button.navlink:hover { color:var(--brand); opacity:1; }
.header .sep { opacity:.35; padding:0 .4rem; user-select:none; }

/* سوییچ تم */
.theme-toggle { display:inline-flex; align-items:center; gap:.5rem; padding:.25rem; }
.theme-toggle svg { width:18px; height:18px; }

/* دراپ‌داون‌های هدر */
.dropdown {
  backdrop-filter:saturate(180%) blur(10px);
  -webkit-backdrop-filter:saturate(180%) blur(10px);
  background:var(--card); border:1px solid var(--stroke);
  border-radius:12px; padding:.75rem;
  transition:opacity .16s ease, transform .16s ease, background-color .25s ease, border-color .25s ease;
}
.dropdown ul { list-style:none; margin:0; padding:0; }
.dropdown a { display:flex; align-items:center; gap:.5rem; font-size:.9rem; padding:.25rem 0; }

/* -------------------------------------------------
   Reveal animation utility
--------------------------------------------------*/
.reveal      { opacity:0; transform:translateY(12px); transition:all .6s ease; }
.reveal.in   { opacity:1; transform:none; }
.reveal-up   { opacity:0; transform:translateY(18px); transition:all .6s ease; }
.reveal-up.in{ opacity:1; transform:none; }
.reveal-right{ opacity:0; transform:translateX(18px); transition:all .6s ease; }
.reveal-right.in{ opacity:1; transform:none; }
.reveal-scale{ opacity:0; transform:scale(.98); transition:all .6s ease; }
.reveal-scale.in{ opacity:1; transform:scale(1); }

/* -------------------------------------------------
   Hero overlay
--------------------------------------------------*/
.dark .hero-overlay{
  background:linear-gradient(to bottom, rgba(0,0,0,.35), rgba(0,0,0,.65));
}
.light .hero-overlay{
  background:linear-gradient(to bottom, rgba(255,255,255,0), rgba(255,255,255,.8));
}

/* -------------------------------------------------
   Down arrow hint
--------------------------------------------------*/
@keyframes bouncefade {
  0%,100%{ transform:translateY(0); opacity:.8; }
  50%{ transform:translateY(8px); opacity:1; }
}
.arrow-hint{ animation:bouncefade 1.6s infinite; }

/* -------------------------------------------------
   RTL / LTR
--------------------------------------------------*/
body.rtl{ direction: rtl; }
body.ltr{ direction: ltr; }

/* -------------------------------------------------
   Phase 5: polish
--------------------------------------------------*/
html { scroll-behavior: smooth; }
[id] { scroll-margin-top: 96px; }

/* ترنزیشن‌های ملایم کلی */
* { transition: background-color .25s ease, color .25s ease, border-color .25s ease; }

/* ناوبری فعال هنگام اسکرول به انکر */
.nav .navlink.active { color: var(--brand); text-underline-offset: 4px; text-decoration: underline; }

/* پل نامرئی بین دکمه و منو برای جلوگیری از بسته‌شدن سریع */
.nav .group { position: relative; }
.nav .group::after {
  content:"";
  position:absolute;
  left:0; right:0; top:100%;
  height:14px; /* اگر لازم شد 16 هم می‌توانی بگذاری */
}

/* حالت‌های باز مگا‌منو (hover + delay توسط ux.ts) */
.group > div > .dropdown {
  visibility:hidden; opacity:0; transform:translateY(4px); pointer-events:none;
}
.group.open > div > .dropdown,
.group:hover > div > .dropdown,
.group:focus-within > div > .dropdown {
  visibility:visible; opacity:1; transform:translateY(0); pointer-events:auto;
}

/* احترام به prefers-reduced-motion */
@media (prefers-reduced-motion: reduce){
  * { transition: none !important; animation: none !important; }
  html { scroll-behavior: auto; }
}
